#!/bin/bash

# à¸ªà¸„à¸£à¸´à¸›à¸•à¹Œà¸ªà¸³à¸«à¸£à¸±à¸šà¸ªà¸¥à¸±à¸š environment à¸‚à¸­à¸‡à¹‚à¸›à¸£à¹€à¸ˆà¸„ AssetWise
# à¸§à¸´à¸˜à¸µà¹ƒà¸Šà¹‰: ./scripts/env.sh [dev|prod|uat]

set -e

ENV=${1:-dev}
URL_CONST_FILE="lib/src/consts/url_const.dart"

case $ENV in
    "dev")
        BASE_URL="https://dev-superapp-api.assetwise.co.th"
        echo "ðŸ”„ à¸à¸³à¸¥à¸±à¸‡à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² Development Environment..."
        ;;
    "prod")
        BASE_URL="https://superapp-api.assetwise.co.th"
        echo "ðŸš€ à¸à¸³à¸¥à¸±à¸‡à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² Production Environment..."
        ;;
    "uat")
        BASE_URL="https://uat-superapp-api.assetwise.co.th"
        echo "ðŸ§ª à¸à¸³à¸¥à¸±à¸‡à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² UAT Environment..."
        ;;

    *)
        echo "âŒ Environment à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡"
        echo "à¸à¸£à¸¸à¸“à¸²à¹ƒà¸Šà¹‰: ./scripts/env.sh [dev|prod|uat]"
        exit 1
        ;;
esac

# à¸ªà¸£à¹‰à¸²à¸‡à¹„à¸Ÿà¸¥à¹Œ url_const.dart à¹ƒà¸«à¸¡à¹ˆ
cat > $URL_CONST_FILE << EOF
// Auto-generated by env.sh script
// Current Environment: $ENV

const BASE_URL = '$BASE_URL';

// Other environments (commented):
// DEV: https://dev-superapp-api.assetwise.co.th
// PROD: https://superapp-api.assetwise.co.th
// UAT: https://uat-superapp-api.assetwise.co.th
EOF

echo "âœ… à¸­à¸±à¸›à¹€à¸”à¸• $URL_CONST_FILE à¹à¸¥à¹‰à¸§"
echo "ðŸ“¡ BASE_URL: $BASE_URL"
echo ""
echo "ðŸ”§ à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸ªà¸³à¸«à¸£à¸±à¸š build:"
echo "   Flutter: flutter build apk --dart-define=ENVIRONMENT=$ENV"
echo "   iOS: flutter build ios --dart-define=ENVIRONMENT=$ENV"